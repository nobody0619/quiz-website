<!-- 在 <script> 内部，定义 API_URL -->
<script>
  const API_URL = 'YOUR_SCRIPT_URL'; // 例如：https://script.google.com/macros/s/ABCDE12345/exec

  // 完成章节后，提交成绩
  function onChapterComplete(score, elapsedSeconds) {
    fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        quizId: currentQuizId,
        name: user,
        score: score,
        time: elapsedSeconds
      })
    });
  }

  // 在 nextQ() 中，当 queue 为空的地方，调用 onChapterComplete
  if (queue.length === 0) {
    // ...已有完成显示代码...
    const durSec = Math.floor((Date.now() - chapterStart) / 1000);
    onChapterComplete(score, durSec);
    return;
  }
</script>
